<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>:_</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="theme-color" content="#000000">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="format-detection" content="telephone=no">
  <meta name="HandheldFriendly" content="true">
  <meta name="apple-touch-fullscreen" content="yes">
  <style>
    #social-icons {
      position: fixed;
      right: 18px;
      bottom: 40px;
      z-index: 9999;
      display: flex;
      gap: 16px;
      background: rgba(0,0,0,0.15);
      border-radius: 24px;
      padding: 8px 14px 8px 14px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.16);
      align-items: center;
    }
    #social-icons a {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: rgba(255,255,255,0.07);
      transition: background 0.2s, transform 0.2s;
      text-decoration: none;
    }
    #social-icons a:hover {
      background: rgba(255,255,255,0.19);
      transform: scale(1.13);
    }
    #social-icons svg {
      width: 20px;
      height: 20px;
      display: block;
    }

    html, body { height: 100%; margin: 0; padding: 0; overflow: hidden; background: #000; }
    body { width: 100vw; height: 100vh; }
    canvas#rain { display: block; position: absolute; top: 0; left: 0; width: 100vw; height: 100vh; pointer-events: none; z-index: 1; }
    #audio-controls { position: fixed; top: 16px; left: 16px; display: flex; align-items: center; gap: 8px; z-index: 20; }
    #mute-btn { width: 32px; height: 32px; background: rgba(0,0,0,0.18); border: 0px solid #f04747; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: background 0.2s, border 0.2s; box-shadow: 0 2px 8px rgba(0,0,0,0.2); opacity: 0.5; pointer-events: none; backdrop-filter: blur(2px);}
    #mute-btn.active { opacity: 1; pointer-events: auto; }
    #mute-btn:hover { background: rgba(24,25,28,0.28); border-color: #ff4b4b; }
    #mute-btn svg { width: 18px; height: 18px; fill: #eee; pointer-events: none; }
    #discord-status-card { position: fixed; top: 16px; left: 60px; min-width: 180px; max-width: 220px; background: rgba(0,0,0,0.18); color: #fff; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.18); display: flex; align-items: center; padding: 10px 14px 10px 10px; font-family: 'Segoe UI', 'Arial', sans-serif; z-index: 21; border: 1.5px solid #00008B; gap: 10px; min-height: 60px; max-height: 80px; box-sizing: border-box; cursor: pointer; transition: box-shadow 0.2s, background 0.2s, border 0.2s; text-decoration: none; backdrop-filter: blur(2px);}
    #discord-status-card:hover { background: rgba(24,25,28,0.28); box-shadow: 0 4px 16px rgba(0,0,0,0.22); border-color: #ff0044; }
    #discord-status-card .avatar { width: 48px; height: 48px; border-radius: 8px; background: #18191c; object-fit: cover; flex-shrink: 0; display: block; border: 2px solid #5865f2; }
    #discord-status-card .status-info { flex: 1; min-width: 0; display: flex; flex-direction: column; justify-content: center; font-size: 13px; line-height: 1.3; }
    #discord-status-card .status-label { font-weight: 600; font-size: 14px; color: #fff; margin-bottom: 2px; display: flex; align-items: center; gap: 6px; }
    #discord-status-card .status-dot { display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin-right: 2px; background: #43b581; border: 1.5px solid #23272a; box-sizing: border-box; }
    #discord-status-card .username { color: #b9bbbe; font-size: 13px; margin-top: 2px; font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    #custom-plus-btn { position: fixed; top: 18px; right: 24px; width: 32px; height: 32px; background: rgba(0,0,0,0.18); border-radius: 50%; border: 0px solid #fff; display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 100; transition: background 0.2s, border 0.2s; box-shadow: 0 2px 8px rgba(0,0,0,0.18);}
    #custom-plus-btn:hover { background: rgba(255,255,255,0.08); border-color: #f04747; }
    #custom-plus-btn svg { width: 18px; height: 18px; fill: #fff; pointer-events: none; }

    #custom-links-list { position: fixed; top: 140px; left: 8px; z-index: 25; margin: 0 0 0 32px; padding: 0; color: #fff; font-size: 1rem; font-family: inherit; list-style-type: disc; background: none; border: none; border-radius: 0; box-shadow: none;}
    #custom-links-list li { margin-bottom: 8px; }
    .custom-link-title-btn { background: none; border: none; color: inherit; font: inherit; cursor: pointer; padding: 0; display: inline; transition: color 0.2s; text-decoration: underline;}
    .custom-link-title-btn:hover { color: #ff4b4b; }
    .custom-link-title-span { color: inherit; font: inherit; display: inline; }
    .custom-link img { max-width: 22px; max-height: 22px; border-radius: 4px; margin-right: 4px; vertical-align: middle; }
    .custom-link-url { margin-left: 6px; color: #fff; font-size: 13px; text-decoration: none; transition: color 0.2s; }
    .custom-link-url:hover { color: #f04747; text-decoration: underline; }
    #custom-link-form-modal { display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.7); z-index: 2000; align-items: center; justify-content: center; }
    #custom-link-form-content { background: rgba(0,0,0,0.18); border: 2px solid #f04747; border-radius: 10px; padding: 28px 28px 20px 28px; box-shadow: 0 4px 32px rgba(0,0,0,0.4); display: flex; flex-direction: column; align-items: center; min-width: 260px; font-family: 'Segoe UI', 'Arial', sans-serif; backdrop-filter: blur(2px); position: relative;}
    #custom-link-form-content label { color: #fff; font-size: 1.1rem; margin-bottom: 8px; align-self: flex-start; }
    #custom-link-form-content input[type="text"], #custom-link-form-content input[type="url"], #custom-link-form-content textarea { padding: 7px 10px; border-radius: 6px; border: 1px solid #333; background: #18191c; color: #fff; font-size: 1rem; margin-bottom: 12px; width: 220px; outline: none; font-family: inherit;}
    #custom-link-form-content textarea { resize: vertical; min-height: 48px; max-height: 120px; }
    #custom-link-form-content input[type="color"] { margin-bottom: 12px; width: 40px; height: 28px; border: none; background: none; cursor: pointer; }
    #custom-link-form-content button { background: #f04747; color: #fff; border: none; border-radius: 6px; padding: 8px 24px; font-size: 1rem; cursor: pointer; font-family: inherit; transition: background 0.2s; margin-top: 8px;}
    #custom-link-form-content button:hover { background: #ff4b4b; }
    #custom-link-form-content .close-btn { position: absolute; top: 10px; right: 18px; background: none; border: none; color: #fff; font-size: 1.5rem; cursor: pointer; padding: 0; }
    #delete-link-section { margin-top: 24px; border-top: 1px solid #333; padding-top: 16px; width: 100%; text-align: left; }
    #typed-content-container { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: #000; color: #fff; z-index: 1000; display: flex; flex-direction: column; align-items: center; justify-content: center; font-family: 'Segoe UI', 'Arial', sans-serif; font-size: 1.2rem; padding: 40px 20px 20px 20px; box-sizing: border-box;}
    #typed-content { width: 100%; max-width: 600px; min-height: 120px; margin: 0 auto 32px auto; white-space: pre-wrap; word-break: break-word; font-size: 1.2rem; letter-spacing: 0.01em; line-height: 1.6;}
    #back-btn { margin-top: 24px; padding: 8px 24px; font-size: 1rem; background: #f04747; color: #fff; border: none; border-radius: 6px; cursor: pointer; font-family: inherit; transition: background 0.2s;}
    #back-btn:hover { background: #000000; }
    .optional { color: #aaa; font-size: 0.95em; font-style: italic; margin-left: 4px; }
    @keyframes tiltMove { 0% { transform: translateX(-50%) rotate(-12deg);} 100% { transform: translateX(-50%) rotate(12deg);} }
    #tilt-indicator { position: fixed; left: 50%; bottom: 32px; transform: translateX(-50%); display: flex; flex-direction: column; align-items: center; z-index: 10; opacity: 1; pointer-events: none; animation: tiltMove 1.2s infinite alternate; transition: opacity 1s;}
    #tilt-indicator.fade { opacity: 0; transition: opacity 1s;}
    #tilt-indicator svg { display: block; }
    .tilt-text { color: #eee; font-size: 1rem; margin-top: 6px; letter-spacing: 0.05em; text-shadow: 0 1px 4px #000; }
    #weather-toggle-label {
      position: fixed;
      top: 18px;
      right: 70px;
      z-index: 101;
      display: inline-block;
      width: 48px;
      height: 28px;
    }
    #weather-toggle-label .slider {
      position: absolute;
      cursor: pointer;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 34px;
    }
    #weather-toggle-label .slider:before {
      position: absolute;
      content: "";
      height: 22px; width: 22px;
      left: 3px; bottom: 3px;
      background-color: white;
      border-radius: 50%;
      transition: .4s;
    }
    #weather-toggle:checked + .slider {
      background-color: #2196F3;
    }
    #weather-toggle:checked + .slider:before {
      transform: translateX(20px);
    }
    #weather-toggle-label .slider.round {
      border-radius: 34px;
    }
    #weather-toggle-label .slider.round:before {
      border-radius: 50%;
    }
    #weather-toggle {
      opacity: 0;
      width: 0;
      height: 0;
    }

    /* Assam Time & Weather Box - Updated for No Overlap */
    #local-time-assam-weather {
      position: fixed;
      right: 18px;
      bottom: 54px; /* Increased to avoid overlap */
      z-index: 9999;
      color: #fff;
      background: rgba(0,0,0,0.22);
      padding: 7px 16px;
      border-radius: 16px;
      font-size: 15px;
      font-family: 'Segoe UI', 'Arial', sans-serif;
      text-align: right;
      min-width: 140px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.18);
      pointer-events: none;
      user-select: none;
      transition: bottom 0.2s;
    }
    @media (max-width: 600px) {
  #local-time-assam-weather {
    bottom: 30px; /* or 36px, or whatever you use for desktop */
    font-size: 13px;
    min-width: 100px;
    padding: 6px 10px;
  }
}

  </style>
</head>
<body>
  <canvas id="rain"></canvas>
  <div id="audio-controls">
    <button id="mute-btn" aria-label="Mute/Unmute audio">
      <svg id="mute-icon" viewBox="0 0 24 24">
        <path d="M16.5 12c0-1.77-.77-3.37-2-4.47v8.94c1.23-1.1 2-2.7 2-4.47zm3.5 0c0 2.53-1.17 4.77-3 6.24v-2.06c1.23-1.1 2-2.7 2-4.47s-.77-3.37-2-4.47V5.76c1.83 1.47 3 3.71 3 6.24zM4 9v6h4l5 5V4L8 9H4zm16.5 3c0-4.14-3.36-7.5-7.5-7.5v2c3.03 0 5.5 2.47 5.5 5.5s-2.47 5.5-5.5 5.5v2c4.14 0 7.5-3.36 7.5-7.5z"/>
        <line x1="1" y1="23" x2="23" y2="1" stroke="#eee" stroke-width="2"/>
      </svg>
    </button>
  </div>
  <a id="discord-status-card" href="https://discord.com/users/1144625381673021520" target="_blank" rel="noopener noreferrer">
    <img class="avatar" id="discord-avatar" src="https://i.postimg.cc/y6wfXkZV/image.png" alt="Discord Avatar">
    <div class="status-info">
      <div class="status-label">
        <span class="status-dot" id="discord-status-dot"></span>
        <span id="discord-status-text">Loading...</span>
      </div>
      <div class="username" id="discord-username">ry_7851</div>
    </div>
  </a>
  <ul id="custom-links-list"></ul>
  <div id="custom-plus-btn" title="Add or remove a link">
    <svg viewBox="0 0 24 24"><rect x="10" y="4" width="4" height="16" fill="white"/><rect x="4" y="10" width="16" height="4" fill="white"/></svg>
  </div>
  <div id="custom-link-form-modal">
    <div id="custom-link-form-content">
      <button class="close-btn" onclick="document.getElementById('custom-link-form-modal').style.display='none'">&times;</button>
      <form id="custom-link-form" autocomplete="off">
        <label for="link-title">Title</label>
        <input type="text" id="link-title" name="title" required maxlength="40" placeholder="Link title">
        <label for="link-url">URL <span class="optional">(optional)</span></label>
        <input type="url" id="link-url" name="url" placeholder="https://example.com">
        <label for="link-color">Link Color</label>
        <input type="color" id="link-color" name="color" value="#f04747">
        <label for="link-image">Image URL (optional)</label>
        <input type="url" id="link-image" name="image" placeholder="https://example.com/image.jpg">
        <label for="link-text">Text (optional)</label>
        <textarea id="link-text" name="text" rows="3" maxlength="500" placeholder="Text to show when clicking the link title"></textarea>
        <label for="add-link-password">Password</label>
        <input type="password" id="add-link-password" name="add-link-password" required placeholder="Password">
        <button type="submit">Add Link</button>
      </form>
      <div id="delete-link-section">
        <label for="delete-link-title">Delete Link by Title</label>
        <input type="text" id="delete-link-title" placeholder="Type link title to delete">
        <input type="password" id="delete-link-password" placeholder="Password" style="margin-left:8px;">
        <button type="button" id="delete-link-btn">Delete Link</button>
      </div>
    </div>
  </div>
  <div id="typed-content-container" style="display:none;"></div>
  <div id="tilt-indicator">
    <svg width="80" height="40" viewBox="0 0 80 40">
      <rect x="10" y="10" width="60" height="20" rx="8" fill="#333" opacity="0.7"/>
      <polygon points="40,15 45,25 35,25" fill="#fff"/>
    </svg>
    <div class="tilt-text">Tilt your device</div>
  </div>
  <audio id="rain-audio" loop></audio>
  <!-- Assam Time & Weather Box -->
  <div id="local-time-assam-weather"></div>
  <script>
    // --- Password hash (replace with your own SHA-256 hash) ---
    const PASSWORD_HASH = "0910331af0dfe59365b0f4e510781c26c1ea69885f0ab2615a8e5a39414f9557";
    async function sha256(str) {
      const buf = new TextEncoder().encode(str);
      const hash = await crypto.subtle.digest('SHA-256', buf);
      return Array.from(new Uint8Array(hash)).map(b => b.toString(16).padStart(2, '0')).join('');
    }

    // --- Rain and Lightning Animation ---
    function random(min, max) {
      return Math.random() * (max - min) + min;
    }
    const canvas = document.getElementById('rain');
    const ctx = canvas.getContext('2d');
    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    const rainColor = 'rgba(180,180,200,0.7)';
    const drops = [];
    const splashes = [];
    let rainAngle = 0;

    if (window.DeviceOrientationEvent) {
      window.addEventListener('deviceorientation', function(event) {
        if (event.gamma !== null) {
          rainAngle = event.gamma * Math.PI / 180 / 8;
        }
      });
    } else {
      window.addEventListener('mousemove', function(e) {
        let percent = (e.clientX / canvas.width) - 0.5;
        rainAngle = percent * 0.8;
      });
    }

    class Drop {
      constructor() {
        this.x = random(0, canvas.width);
        this.y = random(-canvas.height, 0);
        this.length = random(7, 13);
        this.speed = random(4, 8);
        this.thickness = random(0.7, 1.2);
        this.splattered = false;
        this.angle = rainAngle;
      }
      update() {
        this.angle = rainAngle;
        this.x += Math.sin(this.angle) * this.speed;
        this.y += Math.cos(this.angle) * this.speed;
        if (this.y > canvas.height - this.length && !this.splattered) {
          this.splatter();
          this.splattered = true;
        }
      }
      draw() {
        ctx.beginPath();
        ctx.strokeStyle = rainColor;
        ctx.lineWidth = this.thickness;
        ctx.moveTo(this.x, this.y);
        ctx.lineTo(
          this.x - Math.sin(this.angle) * this.length,
          this.y - Math.cos(this.angle) * this.length
        );
        ctx.stroke();
      }
      splatter() {
        for (let i = 0; i < random(4, 7); i++) {
          splashes.push(new Splash(
            this.x,
            canvas.height - 2,
            random(-2, 2) + Math.sin(this.angle) * 2,
            random(-2, -6),
            random(0.6, 1.0)
          ));
        }
      }
    }

    class Splash {
      constructor(x, y, dx, dy, radius) {
        this.x = x;
        this.y = y;
        this.dx = dx;
        this.dy = dy;
        this.radius = radius;
        this.alpha = 1;
        this.gravity = 0.15;
      }
      update() {
        this.x += this.dx;
        this.y += this.dy;
        this.dy += this.gravity;
        this.alpha -= 0.03;
      }
      draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(200,200,220,${this.alpha})`;
        ctx.fill();
      }
    }

    // --- Lightning Effect Variables ---
    let lightningActive = false;
    let lightningAlpha = 0;
    let lightningTimer = 0;
    let nextLightning = random(9500, 10500);

    function drawLightningBolt(ctx, startX, startY, endX, endY, segments) {
      let points = [{x: startX, y: startY}];
      for (let i = 1; i < segments; i++) {
        let t = i / segments;
        let x = startX + (endX - startX) * t + random(-20, 20);
        let y = startY + (endY - startY) * t + random(-20, 20);
        points.push({x, y});
      }
      points.push({x: endX, y: endY});
      ctx.save();
      ctx.strokeStyle = "rgba(255,255,255,0.85)";
      ctx.shadowColor = "#fff";
      ctx.shadowBlur = 12;
      ctx.lineWidth = 2.5;
      ctx.beginPath();
      ctx.moveTo(startX, startY);
      for (let p of points) ctx.lineTo(p.x, p.y);
      ctx.stroke();
      ctx.restore();
    }

    function lightningStep(delta) {
      lightningTimer += delta;
      if (!lightningActive && lightningTimer > nextLightning) {
        lightningActive = true;
        lightningAlpha = 1;
        lightningTimer = 0;
        nextLightning = random(9500, 10500);
      }
      if (lightningActive) {
        lightningAlpha -= delta / 600;
        if (lightningAlpha <= 0) {
          lightningAlpha = 0;
          lightningActive = false;
        }
      }
    }

    // --- Fog Layer Setup ---
    const fogLayers = [
      { y: 0.85, speed: 0.08, opacity: 0.22, scale: 1.0, offset: 0 },
      { y: 0.90, speed: 0.12, opacity: 0.18, scale: 1.3, offset: 1000 },
      { y: 0.95, speed: 0.18, opacity: 0.13, scale: 1.7, offset: 2000 }
    ];

    function noise(x, y) {
      return Math.sin(x * 0.15 + y * 0.2) * 0.5 + Math.cos(x * 0.07 - y * 0.13) * 0.5;
    }

    // --- Fireflies/Glowbugs Setup ---
    const NUM_FIREFLIES = 7;
    const fireflies = [];
    for (let i = 0; i < NUM_FIREFLIES; i++) {
      fireflies.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height * 0.7 + canvas.height * 0.2,
        r: Math.random() * 2.5 + 2,
        baseAlpha: Math.random() * 0.3 + 0.5,
        alpha: 0,
        flicker: Math.random() * Math.PI * 2,
        vx: (Math.random() - 0.5) * 0.18,
        vy: (Math.random() - 0.5) * 0.18,
        pause: Math.random() < 0.4,
        pauseTimer: Math.random() * 2000 + 800
      });
    }

    function updateFireflies(delta) {
      for (let f of fireflies) {
        f.flicker += delta * 0.002 * (Math.random() * 0.7 + 0.7);
        f.alpha = f.baseAlpha + Math.sin(f.flicker) * 0.25 + Math.random() * 0.08;
        if (f.pause) {
          f.pauseTimer -= delta;
          if (f.pauseTimer <= 0) {
            f.pause = false;
            f.pauseTimer = Math.random() * 2000 + 800;
          }
          continue;
        } else if (Math.random() < 0.002) {
          f.pause = true;
          f.pauseTimer = Math.random() * 2000 + 800;
          continue;
        }
        f.x += f.vx * delta * 0.06;
        f.y += f.vy * delta * 0.06;
        if (f.x < 10 || f.x > canvas.width - 10) f.vx *= -1;
        if (f.y < 20 || f.y > canvas.height - 10) f.vy *= -1;
      }
    }

    function drawFireflies(ctx) {
      for (let f of fireflies) {
        ctx.save();
        ctx.globalAlpha = Math.max(0, Math.min(1, f.alpha));
        const grad = ctx.createRadialGradient(f.x, f.y, 0, f.x, f.y, f.r * 2.2);
        grad.addColorStop(0, "#fffbe6");
        grad.addColorStop(0.3, "#ffe066");
        grad.addColorStop(0.7, "#ffe06600");
        ctx.beginPath();
        ctx.arc(f.x, f.y, f.r * 2.2, 0, Math.PI * 2);
        ctx.fillStyle = grad;
        ctx.shadowColor = "#ffe066";
        ctx.shadowBlur = 16;
        ctx.fill();
        ctx.restore();
      }
    }

    let lastTime = performance.now();
    function animateWithLightning(now) {
      let delta = now - lastTime;
      lastTime = now;

      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = "#000";
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      for (let i = drops.length - 1; i >= 0; i--) {
        let drop = drops[i];
        drop.update();
        drop.draw();
        if (drop.y > canvas.height || drop.x < 0 || drop.x > canvas.width) {
          drops[i] = new Drop();
        }
      }
      for (let i = splashes.length - 1; i >= 0; i--) {
        let splash = splashes[i];
        splash.update();
        splash.draw();
        if (splash.alpha <= 0) {
          splashes.splice(i, 1);
        }
      }
      while (drops.length < 80) {
        drops.push(new Drop());
      }

      lightningStep(delta);
      if (lightningActive) {
        ctx.save();
        ctx.globalAlpha = lightningAlpha * random(0.25, 0.45);
        ctx.fillStyle = "#fff";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.restore();

        if (lightningAlpha > 0.7 && !animateWithLightning.boltDrawn) {
          let startX = random(canvas.width * 0.2, canvas.width * 0.8);
          drawLightningBolt(ctx, startX, 0, startX + random(-40, 40), random(canvas.height * 0.4, canvas.height * 0.7), 12);
          animateWithLightning.boltDrawn = true;
        }
        if (lightningAlpha <= 0.7) {
          animateWithLightning.boltDrawn = false;
        }
      }
      updateFireflies(delta);
      drawFireflies(ctx);

      requestAnimationFrame(animateWithLightning);
    }
    animateWithLightning.boltDrawn = false;
    requestAnimationFrame(animateWithLightning);

    // --- Music Shuffle & Mute ---
    const audioFiles = [
      "music/track1.opus", "music/track2.opus", "music/track3.opus", "music/track4.opus", "music/track5.opus",
      "music/track6.opus", "music/track7.opus", "music/track8.opus", "music/track9.opus", "music/track10.opus",
      "music/track11.opus", "music/track12.opus", "music/track13.opus", "music/track14.opus", "music/track15.opus",
      "music/track16.opus", "music/track17.opus", "music/track18.opus", "music/track19.opus", "music/track20.opus",
      "music/track21.opus", "music/track22.opus"
    ];
    const rainAudio = document.getElementById('rain-audio');
    const muteBtn = document.getElementById('mute-btn');
    let isMuted = true;
    let audioLoaded = false;
    let playlist = [];
    let currentTrack = 0;

    const muteSVG = `<svg id="mute-icon" viewBox="0 0 24 24">
      <path d="M16.5 12c0-1.77-.77-3.37-2-4.47v8.94c1.23-1.1 2-2.7 2-4.47zm3.5 0c0 2.53-1.17 4.77-3 6.24v-2.06c1.23-1.1 2-2.7 2-4.47s-.77-3.37-2-4.47V5.76c1.83 1.47 3 3.71 3 6.24zM4 9v6h4l5 5V4L8 9H4zm16.5 3c0-4.14-3.36-7.5-7.5-7.5v2c3.03 0 5.5 2.47 5.5 5.5s-2.47 5.5-5.5 5.5v2c4.14 0 7.5-3.36 7.5-7.5z"/>
      <line x1="1" y1="23" x2="23" y2="1" stroke="#eee" stroke-width="2"/>
    </svg>`;
    const unmuteSVG = `<svg id="unmute-icon" viewBox="0 0 24 24">
      <path d="M16.5 12c0-1.77-.77-3.37-2-4.47v8.94c1.23-1.1 2-2.7 2-4.47zm3.5 0c0 2.53-1.17 4.77-3 6.24v-2.06c1.23-1.1 2-2.7 2-4.47s-.77-3.37-2-4.47V5.76c1.83 1.47 3 3.71 3 6.24zM4 9v6h4l5 5V4L8 9H4z"/>
    </svg>`;

    function updateMuteIcon() {
      muteBtn.innerHTML = isMuted ? muteSVG : unmuteSVG;
    }

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    function setupPlaylist() {
      playlist = audioFiles.slice();
      shuffleArray(playlist);
      currentTrack = 0;
      if (playlist.length > 0) {
        rainAudio.src = playlist[currentTrack];
        rainAudio.volume = 0.5;
        audioLoaded = true;
        muteBtn.classList.add('active');
        isMuted = true;
        updateMuteIcon();
      }
    }

    rainAudio.addEventListener('ended', function() {
      if (playlist.length > 0) {
        currentTrack = (currentTrack + 1) % playlist.length;
        rainAudio.src = playlist[currentTrack];
        if (!isMuted) rainAudio.play();
      }
    });

    muteBtn.addEventListener('click', function() {
      if (!audioLoaded) return;
      isMuted = !isMuted;
      if (!isMuted) {
        rainAudio.play();
      } else {
        rainAudio.pause();
      }
      updateMuteIcon();
    });

    window.addEventListener('DOMContentLoaded', function() {
      setupPlaylist();
    });

    updateMuteIcon();

    // --- Discord Status Card Logic ---
    const DISCORD_USER_ID = "1144625381673021520";
    const DISCORD_USERNAME = "ry_7851";
    const AVATAR_URL = "https://i.postimg.cc/y6wfXkZV/image.png";

    document.getElementById("discord-status-card").href = `https://discord.com/users/${DISCORD_USER_ID}`;
    document.getElementById("discord-username").textContent = DISCORD_USERNAME;
    document.getElementById("discord-avatar").src = AVATAR_URL;

    const STATUS_MAP = {
      online: { label: "Online", color: "#43b581", icon: "" },
      idle: { label: "Idle", color: "#faa61a", icon: "" },
      dnd: { label: "Do Not Disturb", color: "#f04747", icon: "" },
      offline: { label: "Offline", color: "#747f8d", icon: "" }
    };

    function updateStatus() {
      fetch(`https://api.lanyard.rest/v1/users/${DISCORD_USER_ID}`)
        .then(r => r.json())
        .then(res => {
          const statusText = document.getElementById("discord-status-text");
          const statusDot = document.getElementById("discord-status-dot");
          if (res && res.success && res.data) {
            let status = res.data.discord_status;
            if (!["online", "idle", "dnd"].includes(status)) status = "offline";
            const map = STATUS_MAP[status];
            statusText.textContent = `${map.icon} ${map.label}`;
            statusDot.style.background = map.color;
            statusDot.title = map.label;
          } else {
            const map = STATUS_MAP["offline"];
            statusText.textContent = `${map.icon} ${map.label}`;
            statusDot.style.background = map.color;
            statusDot.title = map.label;
          }
        })
        .catch(() => {
          const map = STATUS_MAP["offline"];
          document.getElementById("discord-status-text").textContent = `${map.icon} ${map.label}`;
          const statusDot = document.getElementById("discord-status-dot");
          statusDot.style.background = map.color;
          statusDot.title = map.label;
        });
    }
    updateStatus();
    setInterval(updateStatus, 15000);

    // --- Dictionary-based Custom Links Logic ---
    let globalLinksDict = {};
    const GITHUB_REPO = "your-github-username/your-repo-name"; // Replace with your repo
    const GITHUB_BRANCH = "main"; // Replace with your branch
    const GITHUB_API_BASE = "https://api.github.com";

    async function fetchGlobalLinks() {
      try {
        const response = await fetch('links.json');
        if (response.ok) {
          const data = await response.json();
          globalLinksDict = data;
        } else {
          globalLinksDict = {};
        }
      } catch (e) {
        globalLinksDict = {};
      }
    }

    function renderLinks() {
      const ul = document.getElementById('custom-links-list');
      ul.innerHTML = '';
      const keys = Object.keys(globalLinksDict);
      if (keys.length === 0) {
        const empty = document.createElement('li');
        empty.textContent = "No links yet. Click the + to add one!";
        empty.style.color = "#bbb";
        ul.appendChild(empty);
      }
      keys.forEach(key => {
        const link = globalLinksDict[key];
        const li = document.createElement('li');
        li.style.marginBottom = "6px";
        const linkElem = document.createElement('a');
        linkElem.href = link.url && link.url.trim() ? link.url : "?????";
        linkElem.target = link.url && link.url.trim() ? "_blank" : "";
        linkElem.style.color = link.color || "#f04747";
        linkElem.style.textDecoration = "underline";
        linkElem.style.cursor = "pointer";
        linkElem.style.fontWeight = "500";
        if (link.image) {
          const img = document.createElement('img');
          img.src = link.image;
          img.alt = "";
          img.style.maxWidth = "22px";
          img.style.maxHeight = "22px";
          img.style.borderRadius = "4px";
          img.style.marginRight = "4px";
          img.style.verticalAlign = "middle";
          linkElem.appendChild(img);
        }
        linkElem.appendChild(document.createTextNode(link.title));
        if (link.text && link.text.trim()) {
          linkElem.onclick = function(e) {
            e.preventDefault();
            showTypedContent(link.text, link.image);
          };
        }
        li.appendChild(linkElem);
        ul.appendChild(li);
      });
    }

    async function getFileSha() {
      // Removed GitHub API logic as per user request to avoid conflict with existing logic
      throw new Error("GitHub API logic for updating links.json has been removed to avoid conflicts.");
    }

    async function updateLinksJson(newLinks, token) {
      // Removed GitHub API logic as per user request to avoid conflict with existing logic
      throw new Error("GitHub API logic for updating links.json has been removed to avoid conflicts.");
    }

    async function initLinks() {
      await fetchGlobalLinks();
      renderLinks();
    }
    initLinks();

    document.getElementById('custom-plus-btn').onclick = function() {
      document.getElementById('custom-link-form-modal').style.display = 'flex';
    };

    document.getElementById('custom-link-form').onsubmit = async function(e) {
      e.preventDefault();
      const title = this.elements['title'].value.trim();
      const url = this.elements['url'].value.trim();
      const color = this.elements['color'].value;
      const imageUrl = this.elements['image'].value.trim();
      const text = this.elements['text'].value.trim();
      const password = this.elements['add-link-password'].value;

      if (!title) return;
      if (url && !/^https?:\/\//i.test(url)) {
        alert("Please enter a valid URL (must start with http:// or https://)");
        return;
      }
      if (imageUrl && !/^https?:\/\//i.test(imageUrl)) {
        alert("Please enter a valid image URL (must start with http:// or https://)");
        return;
      }
      if (!password) {
        alert("Please enter the password.");
        return;
      }

      const hash = await sha256(password);
      if (hash !== PASSWORD_HASH) {
        alert("Incorrect password.");
        this.elements['add-link-password'].value = "";
        this.elements['add-link-password'].focus();
        return;
      }

      try {
        const newLink = {
          title,
          url,
          color,
          image: imageUrl || null,
          text
        };
        const updatedLinks = {...globalLinksDict, [title]: newLink};
        const jsonString = JSON.stringify(updatedLinks, null, 2);
      const prContent = `Please create a pull request with the following updated links.json content:\n\n\`\`\`json\n${jsonString}\n\`\`\``;

      // Create a modal to show the PR content with a copy button
      const modal = document.createElement('div');
      modal.style.position = 'fixed';
      modal.style.top = '0';
      modal.style.left = '0';
      modal.style.width = '100vw';
      modal.style.height = '100vh';
      modal.style.backgroundColor = 'rgba(0,0,0,0.7)';
      modal.style.display = 'flex';
      modal.style.flexDirection = 'column';
      modal.style.justifyContent = 'center';
      modal.style.alignItems = 'center';
      modal.style.zIndex = '3000';

      const contentBox = document.createElement('div');
      contentBox.style.backgroundColor = 'rgba(0,0,0,0.9)';
      contentBox.style.color = '#fff';
      contentBox.style.padding = '20px';
      contentBox.style.borderRadius = '10px';
      contentBox.style.maxWidth = '90vw';
      contentBox.style.maxHeight = '80vh';
      contentBox.style.overflowY = 'auto';
      contentBox.style.fontFamily = 'monospace';
      contentBox.style.whiteSpace = 'pre-wrap';
      contentBox.textContent = prContent;

      const copyBtn = document.createElement('button');
      copyBtn.textContent = 'Copy to Clipboard';
      copyBtn.style.marginTop = '12px';
      copyBtn.style.padding = '8px 16px';
      copyBtn.style.border = 'none';
      copyBtn.style.borderRadius = '6px';
      copyBtn.style.backgroundColor = '#f04747';
      copyBtn.style.color = '#fff';
      copyBtn.style.cursor = 'pointer';
      copyBtn.style.fontSize = '1rem';

      copyBtn.onclick = () => {
        navigator.clipboard.writeText(prContent).then(() => {
          copyBtn.textContent = 'Copied!';
          setTimeout(() => {
            copyBtn.textContent = 'Copy to Clipboard';
          }, 2000);
        });
      };

      const closeBtn = document.createElement('button');
      closeBtn.textContent = 'Close';
      closeBtn.style.marginTop = '8px';
      closeBtn.style.padding = '8px 16px';
      closeBtn.style.border = 'none';
      closeBtn.style.borderRadius = '6px';
      closeBtn.style.backgroundColor = '#555';
      closeBtn.style.color = '#fff';
      closeBtn.style.cursor = 'pointer';
      closeBtn.style.fontSize = '1rem';

      closeBtn.onclick = () => {
        document.body.removeChild(modal);
      };

      contentBox.appendChild(copyBtn);
      contentBox.appendChild(closeBtn);
      modal.appendChild(contentBox);
      document.body.appendChild(modal);
      } catch (err) {
        alert("Failed to generate pull request content: " + err.message);
      }
    };

    document.getElementById('delete-link-btn').onclick = async function() {
      const input = document.getElementById('delete-link-title');
      const passwordInput = document.getElementById('delete-link-password');
      const titleToDelete = input.value.trim();
      const password = passwordInput.value;

      if (!titleToDelete) {
        alert("Please enter the link title to delete.");
        return;
      }
      if (!password) {
        alert("Please enter the password.");
        return;
      }

      const hash = await sha256(password);
      if (hash !== PASSWORD_HASH) {
        alert("Incorrect password.");
        passwordInput.value = "";
        passwordInput.focus();
        return;
      }

      try {
        if (!globalLinksDict[titleToDelete]) {
          alert("No link found with that title.");
          return;
        }
        const {[titleToDelete]: _, ...rest} = globalLinksDict;
        const jsonString = JSON.stringify(rest, null, 2);
        const prContent = `Please create a pull request with the following updated links.json content after deleting the link titled "${titleToDelete}":\n\n\`\`\`json\n${jsonString}\n\`\`\``;
        alert(prContent);
      } catch (err) {
        alert("Failed to generate pull request content: " + err.message);
      }
    };


    document.getElementById('custom-link-form-modal').onclick = function(e) {
      if (e.target === this) this.style.display = 'none';
    };

    function showTypedContent(text, image) {
      const overlay = document.getElementById('typed-content-container');
      overlay.style.display = 'flex';
      overlay.innerHTML = `<div id="typed-content"></div>`;
      const typedDiv = document.getElementById('typed-content');
      let i = 0;
      function typeChar() {
        if (i <= text.length) {
          typedDiv.textContent = text.slice(0, i);
          i++;
          setTimeout(typeChar, 18 + Math.random() * 30);
        } else {
          if (image) {
            const imgElem = document.createElement('img');
            imgElem.src = image;
            imgElem.alt = "";
            imgElem.style.display = "block";
            imgElem.style.maxWidth = "90%";
            imgElem.style.margin = "24px auto 0 auto";
            imgElem.style.borderRadius = "8px";
            typedDiv.appendChild(document.createElement('br'));
            typedDiv.appendChild(imgElem);
          }
          const backBtn = document.createElement('button');
          backBtn.id = 'back-btn';
          backBtn.textContent = 'Back';
          backBtn.onclick = function() {
            overlay.style.display = 'none';
          };
          overlay.appendChild(backBtn);
        }
      }
      typeChar();
    }

    // Tilt indicator fade out
    window.addEventListener('DOMContentLoaded', function() {
      const indicator = document.getElementById('tilt-indicator');
      setTimeout(() => {
        indicator.classList.add('fade');
      }, 3000);
    });

    // --- Assam Local Time and Weather Display (IST) ---
    async function fetchAssamWeather() {
      // Coordinates for Assam, India (approximate center)
      const lat = 26.2006;
      const lon = 92.9376;
      const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`;

      try {
        const response = await fetch(url);
        const data = await response.json();
        if (data && data.current_weather) {
          const temp = Math.round(data.current_weather.temperature);
          const code = data.current_weather.weathercode;
          const codeMap = {
            0: "Clear",
            1: "Mainly Clear",
            2: "Partly Cloudy",
            3: "Cloudy",
            45: "Fog",
            48: "Depositing Rime Fog",
            51: "Drizzle",
            53: "Drizzle",
            55: "Drizzle",
            56: "Freezing Drizzle",
            57: "Freezing Drizzle",
            61: "Rain",
            63: "Rain",
            65: "Rain",
            66: "Freezing Rain",
            67: "Freezing Rain",
            71: "Snow",
            73: "Snow",
            75: "Snow",
            77: "Snow Grains",
            80: "Rain Showers",
            81: "Rain Showers",
            82: "Rain Showers",
            85: "Snow Showers",
            86: "Snow Showers",
            95: "Thunderstorm",
            96: "Thunderstorm",
            99: "Thunderstorm"
          };
          const weatherDesc = codeMap[code] || "Weather";
          return `${weatherDesc}, ${temp}°C`;
        }
      } catch (error) {
        return "Weather: N/A";
      }
      return "Weather: N/A";
    }

    async function updateAssamTimeWeatherDisplay() {
      const now = new Date();
      const options = {
        timeZone: 'Asia/Kolkata',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit',
        hour12: false,
        month: 'short',
        day: 'numeric'
      };
      const dateTimeString = now.toLocaleString('en-IN', options);
      const weatherText = await fetchAssamWeather();
      document.getElementById('local-time-assam-weather').textContent =
        `Assam: ${dateTimeString} (IST) • ${weatherText}`;
    }

    // Update every 60 seconds to reduce API calls, but update time every second visually
    updateAssamTimeWeatherDisplay();
    setInterval(updateAssamTimeWeatherDisplay, 60000);

    // Optional: Update time display every second without fetching weather again
    setInterval(() => {
      const now = new Date();
      const options = {
        timeZone: 'Asia/Kolkata',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit',
        hour12: false,
        month: 'short',
        day: 'numeric'
      };
      const dateTimeString = now.toLocaleString('en-IN', options);
      const el = document.getElementById('local-time-assam-weather');
      if (el) {
        const parts = el.textContent.split('•');
        const weatherPart = parts.length > 1 ? parts[1].trim() : '';
        el.textContent = `Assam: ${dateTimeString} (IST) • ${weatherPart}`;
      }
    }, 1000);
  </script>
</body>
</html>